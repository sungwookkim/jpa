3. 다양한 연관관계 매핑

다음 요구사항이 추가되었다.

- 상품을 주문할 때 배송 정보를 이력할 수 있다. 주문과 배송을 일대일 관계다.
- 상품을 카테고리로 구분할 수 있다.

회원(일대다) -- (다대일)주문(일대다) -- (다대일)주문상품(다대일) -- (일대다)상품(다대다) -- (다대다)카테고리
                      (일대일)
                         |
                         | 
                      (일대일)
                       배송
                       
4. 상속 관계 매핑

다음 요구사항이 추가되었다.

- 상품의 종류는 음박, 도서, 영화가 있고 이후 더 확장될 수 있다.
- 모든 데이터는 등록일과 수정일이 있어야 한다.

5. 연관관계 정리 

글로벌 페치 전략
글로벌 페치 전략을 즉시 로딩으로 설정하면 사용하지 않는 엔티티도 함께 조회되므로 모두 지연 로딩으로 설정하겠다.
@OneToMany, @ManyToMany는 기본이 지연 로딩이므로 두고 @OneToOne, @ManyToOne의 fetch 속성을 지연 로딩으로 수정하자.
연관관계를 설정한 코드를 찾아보니 주문과 주문상품에 @OneToOne, @ManyToOne으로 매핑한 속성들이 있다.

영속성 전이 설정
엔티티를 영속 상태로 만들어서 데이터베이스에 저장할 때 연관된 엔티티도 모두 영속 상태여야 한다. 연관된 엔티티 중에 영속 상태가
아닌 엔티티가 있으면 예외가 발생한다.(정확히는 플러시 시점에 오류가 발생된다.)
영속성 전이를 사용하면 연관된 엔티티를 편리하게 영속 상태로 만들 수 있다.
주문과 배송, 주문과 주문상품의 연관관계에 영속성 전이를 사용하자.
